---
layout:     post
title:      流畅的python第3章笔记
date:       2018-02-26
summary:    流畅的python第3章笔记
categories: python
tags:
 - python
---

### 字典和集合

1.散列表是字典类型性能出众的根本原因

2.字典推导

```
In [2]: dial_codes=[(86,'china'),(91,'india'),(1,'US')]

In [3]: country_code={country: code for code,country in dial_codes}

In [4]: country_code
Out[4]: {'US': 1, 'china': 86, 'india': 91}

In [5]: country_code={country.upper(): code for code,country in dial_codes}

In [6]: country_code
Out[6]: {'CHINA': 86, 'INDIA': 91, 'US': 1}
```

3.dict的setdefault用法

```
In [18]: a = {'runoob': '菜鸟教程', 'google': 'Google 搜索'}

In [19]: a.setdefault('test','lalala')
Out[19]: 'lalala'

In [20]: a
Out[20]: {'google': 'Google 搜索', 'runoob': '菜鸟教程', 'test': 'lalala'}

In [21]: a.setdefault('runoob','lalala')
Out[21]: '菜鸟教程'

In [22]: a
Out[22]: {'google': 'Google 搜索', 'runoob': '菜鸟教程', 'test': 'lalala'}
```

4.有时候为了方便起见,就算某个键在映射里不存在,我们也希望在通过这个键读取值的时候能得到一个默认值.有两个途径能帮我们达到这个目的.
+ a.通过`collections.defaultdict`这个类型而不是普通的dict
+ b.给自己定义一个dict的子类,然后在子类中实现`__missing__`方法,如:

```
class StrKeyDict0(dict):

    def __missing__(self,key):
        if isinstance(key,str):
            raise KeyError(key)
        return self[str(key)]
```

所有的映射类型在处理找不到的键的时候,都会牵扯到`__missing__`方法.虽然基类dict并没有定义这个方法,但是dict是知道有这么个东西存在的.`__missing__`方法只会被`__getitem__`调用(比如在表达式`d[k]`中)

5.to be continue...
