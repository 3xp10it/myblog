---
layout:     post
title:      深入理解计算机系统第8章笔记
date:       2017-09-19
summary:    深入理解计算机系统第8章笔记
categories: auxilary
tags:
 - csapp
---

### 异常控制流

1.ECF:异常控制流(Exceptional Control Flow)

2.应用程序通过使用一个叫做陷阱(trap)或者系统调用(system call)的ECF形式,向操作系统请求服务

3.非本地跳转是一种应用层ECF,在C中是通过setjmp和longjmp函数提供的

4.异常位于硬件和操作系统交界的部分,进程和信号位于应用和操作系统的交界之处

5.异常是异常控制流的一种形式,它一部分是由硬件实现的,一部分是由操作系统实现的

6.异常处理程序运行在内核模式下,这意味着它们对所有的系统资源都有完全的访问权限

7.异常可以分为4类:中断,陷阱,故障,终止.如下图8-4.  
<img src="https://raw.githubusercontent.com/3xp10it/pic/master/csapp8-1.png">

a)中断:中断是异步发生的,是来自处理器外部的I/O设备的信号的结果.I/O设备通过向外理器芯片上的一个引脚发信号,并将异常
号放到系统总线上,以触发中断.在当前指令完成执行之后,处理器注意到中断引脚的电压变高了,就从系统总线读取异常号,然后调
用适当的中断处理程序  
b)陷阱:陷阱是有意的异常,是执行一条指令的结果,陷阱最重要的用途是在用户程序和内核之间提供一个像过程一样的接口,叫系
统调用.用户程序向内核请求服务(也即应用程序执行一次系统调用syscall),执行syscall指令会导致一个到异常处理程序的陷阱,
这个处理程序对参数解码,并调用适当的内核程序  
c)故障:故障由错误情况引起,它可能能够被故障处理程序修正.如果处理程序能够修正这个错误情况,它就将控制返回到引起故障
的指令,从而重新执行它,否则,处理程序返回到内核中的abort例程并终止引起故障的应用程序  
d)终止:终止是不可恢复的致命错误造成的结果,通常是一些硬件错误,终止处理程序从不将控制返回给应用程序

