---
layout:     post
title:      深入理解计算机系统第9章笔记
date:       2017-09-28
summary:    深入理解计算机系统第9章笔记
categories: auxilary
tags:
 - csapp
---

### 虚拟存储器

1.[虚拟存储器的理解][1],windows下的c盘中的pagefile.sys是虚拟内存文件.

2.虚拟存储器是硬件异常,硬件地址翻译,主存,磁盘文件和内核软件的完美交互,它为每个进程提供了一个大的,一致的私有的地址
空间.虚拟存储器提供了3个重要能力:  
a)它将主存看成是一个存储在磁盘上的地址空间的高速缓存,在主存中只保存活动区域,并根据需要在磁盘和主存之间来回传送数
据,通过这种方式,它高效地使用了主存  
b)它为每个进程提供了一致的地址空间,从而简化了存储器管理  
c)它保护了每个进程的地址空间不被其他进程破坏

3.地址翻译:将一个虚拟地址转换为物理地址.就像异常处理一样,地址翻译需要cpu硬件和操作系统之间的紧密合作.cpu芯片上叫
做存储器管理单元(MMU)的专用硬件,利用存放在主存中的查询表来动态翻译虚拟地址.如下图.

<img src="https://raw.githubusercontent.com/3xp10it/pic/master/csapp9-1.png">

4.主存中的每个字节都有一个选自虚拟地址空间的虚拟地址和一个选自物理地址空间的物理地址

5.磁盘上数组的内容被缓存在主存中.和存储器层次结构中其他缓存一样,磁盘(较低层)上的数据被分割成块,这些块作为磁盘和主
存(较高层)之间的传输单元.为了有助于清晰地去理解存储层次结构中不同的缓存概念,我们将使用术语SRAM缓存来表示位于CPU和
主存之间的L1,L2和L3调整缓存,并且用术语DRAM缓存来表示虚拟存储器系统的缓存,它在主存中缓存虚拟页

6.虚拟存储器系统通过将虚拟存储器分割为称为虚拟页的大小固定的块来处理这个问题,如下图中的虚拟存储器有8个虚拟页.类似
地,物理存储器被分割为物理页,物理页和虚拟页大小相同,物理页也称为页帧.任意时刻,虚拟页面的集合都分为有一个不相交的子
集:  
未分配的:虚拟存储器系统还未分配的页,未分配的块没有任何数据和它们相关联,因此也就不占用任何磁盘空间  
缓存的:当前缓存在物理存储器中的已分配页  
未缓存的:没有缓存在物理存储器中的已分配页(已分配代表占用磁盘空间)

<img src="https://raw.githubusercontent.com/3xp10it/pic/master/csapp9-2.png">

7.


[1]: https://www.zhihu.com/question/21088377
